{"version":3,"sources":["controls.js","App.js","reportWebVitals.js","index.js"],"names":["Parameter","props","formatter","parser","param","type","value","replace","title","description","onChange","name","checked","min","max","tooltipVisible","style","width","ParameterGroup","names","map","plan","rate","NothingControls","Controls","controlSet","selected","Step","Steps","antIcon","LoadingOutlined","fontSize","spin","SubMenu","Menu","DEFAULT_PLAN","basic_rate","default","summary","higher_rate","add_rate","basic_threshold","higher_threshold","add_threshold","personal_allowance","NI_main_rate","NI_add_rate","NI_PT","NI_UEL","child_BI","adult_BI","senior_BI","App","state","paddingLeft","paddingRight","subTitle","height","path","Row","paddingBottom","current","Col","md","PlanSummary","this","className","overflowY","onClick","setState","key","val","PolicyCommentary","image","SimulateButton","React","Component","to","Results","results","waiting","submission","fetch","method","headers","body","JSON","stringify","then","res","json","net_cost","Math","abs","precision","valueStyle","color","prefix","ArrowUpOutlined","ArrowDownOutlined","data","decile_plot","layout","poverty_plot","age","indicator","progressDot","direction","Object","keys","i","status","ControlTab","mode","openKeys","Item","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.cd81297c.chunk.js","sourcesContent":["import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\nimport \"antd/dist/antd.css\";\nimport { InputNumber, Divider, Switch, Slider } from 'antd';\n\nfunction Parameter(props) {\n    let formatter = null;\n    let parser = null;\n    if(props.param.type === \"rate\") {\n        formatter = value => `${value}%`;\n        parser = value => value.replace('%', '');\n    } else if (props.param.type === \"weekly\") {\n        formatter = value => `£${value}/week`\n        parser = value => value.replace('£', '').replace(\"/week\", \"\");\n    } else if (props.param.type === \"yearly\") {\n        formatter = value => `£${value}/year`;\n        parser = value => value.replace('£', '').replace(\"/year\", \"\");\n    } else if (props.param.type === \"monthly\") {\n        formatter = value => `£${value}/month`;\n        parser = value => value.replace('£', '').replace(\"/month\", \"\");\n    }\n    return (\n        <>\n            <Divider>{props.param.title}</Divider>\n            <p>{props.param.description}</p>\n            {props.param.type === \"bool\" ? \n            <Switch onChange={value => {props.onChange(props.name, value)}} checked={props.param.value}/> :\n            <>\n              <Slider \n              value={props.param.value}\n              min={props.param.min || 0}\n              max={props.param.max || 100}\n              onChange={value => {props.onChange(props.name, value)}}\n              tooltipVisible={false}\n              />\n              <InputNumber\n                  value={props.param.value}\n                  min={props.param.min ? props.min : null}\n                  max={props.param.max ? props.max : null}\n                  formatter={formatter}\n                  parser={parser}\n                  onChange={value => {props.onChange(props.name, value)}}\n                  style={{width: 175}}\n              />\n            </>}\n        </>\n    )\n}\n\nfunction ParameterGroup(props) {\n    return (\n        <>\n            {props.names.map(name => <Parameter key={name} name={name} param={props.plan[name]} onChange={props.onChange} rate/>)}\n        </>\n    )\n}\n  \n  function NothingControls(props) {\n    return (\n      <>\n        <Divider>No parameters available</Divider>\n        <p>No parameters are currently available for this category.</p>\n      </>\n    )\n  }\n  \nexport function Controls(props) {\n    const controlSet = {\n      \"main_rates\": [\n          \"basic_rate\",\n          \"basic_threshold\",\n          \"higher_rate\",\n          \"higher_threshold\",\n          \"add_rate\",\n          \"add_threshold\"\n      ],\n      \"employee_side\": [\n        \"NI_main_rate\",\n        \"NI_PT\",\n        \"NI_add_rate\",\n        \"NI_UEL\"\n      ],\n      \"allowances\": [\n        \"personal_allowance\"\n      ],\n      \"basic_income\": [\n          \"child_BI\",\n          \"adult_BI\",\n          \"senior_BI\"\n      ]\n    };\n    let names = controlSet[props.selected];\n    if(!(props.selected in controlSet)) {\n      return <NothingControls key={props.selected} plan={props.plan}/>\n    } else {\n      return <ParameterGroup key={props.selected} onChange={props.onChange} plan={props.plan} names={names}/>;\n    }\n  }","import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Row, Col} from 'react-bootstrap';\nimport React from 'react';\nimport Plot from 'react-plotly.js';\nimport { Menu } from 'antd';\nimport \"antd/dist/antd.css\";\nimport { PageHeader, Divider, Button, Empty, Spin, Steps, Statistic, Card } from 'antd';\nimport { ArrowUpOutlined, ArrowDownOutlined } from '@ant-design/icons';\nimport { LoadingOutlined } from '@ant-design/icons';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n} from \"react-router-dom\";\nimport { Controls } from './controls';\n\nconst { Step } = Steps;\n\nconst antIcon = <LoadingOutlined style={{ fontSize: 24 }} spin />;\nconst { SubMenu } = Menu;\n\nconst DEFAULT_PLAN = {\n  basic_rate: {\n    title: \"Basic rate\",\n    description: \"The basic rate is the first of three tax brackets on all income, after allowances are deducted.\",\n    default: 20,\n    value: 20,\n    summary: \"Change the basic rate to @%\",\n    type: \"rate\"\n  },\n  higher_rate: {\n    title: \"Higher rate\",\n    description: \"The higher rate is the middle tax bracket.\",\n    default: 40,\n    value: 40,\n    summary: \"Change the higher rate to @%\",\n    type: \"rate\"\n  },\n  add_rate: {\n    title: \"Additional rate\",\n    description: \"The additional rate is the highest tax bracket, with no upper bound.\",\n    default: 45,\n    value: 45,\n    summary: \"Change the additional rate to @%\",\n    type: \"rate\"\n  },\n  basic_threshold: {\n    title: \"Basic rate threshold\",\n    description: \"Lower threshold for the basic rate, on income after allowances (including the personal allowance) have been deducted.\",\n    default: 0,\n    value: 0,\n    max: 100000,\n    summary: \"Change the basic rate to £@/year\",\n    type: \"yearly\"\n  },\n  higher_threshold: {\n    title: \"Higher rate threshold\",\n    description: \"The lower threshold for the higher rate of income tax (and therefore the upper threshold of the basic rate).\",\n    default: 37500,\n    value: 37500,\n    max: 200000,\n    summary: \"Change the higher rate to £@/year\",\n    type: \"yearly\"\n  },\n  add_threshold: {\n    title: \"Additional rate\",\n    description: \"The lower threshold for the additional rate.\",\n    default: 150000,\n    value: 150000,\n    max: 1000000,\n    summary: \"Change the additional rate to £@/year\",\n    type: \"yearly\"\n  },\n  personal_allowance: {\n    title: \"Personal allowance\",\n    description: \"The personal allowance is deducted from general income.\",\n    default: 12500,\n    value: 12500,\n    max: 25000,\n    summary: \"Change the personal allowance to £@/year\",\n    type: \"yearly\"\n  },\n  NI_main_rate: {\n    title: \"NI main rate\",\n    description: \"The Class 1 NI main rate is paid on employment earnings between the Primary Threshold and the Upper Earnings Limit.\",\n    default: 12,\n    value: 12,\n    summary: \"Change the NI main rate to @%\",\n    type: \"rate\"\n  },\n  NI_add_rate: {\n    title: \"NI additional rate\",\n    description: \"The Class 1 NI additional rate is paid on employment earnings above the Upper Earnings Limit.\",\n    default: 2,\n    value: 2,\n    summary: \"Change the NI additional rate to @%\",\n    type: \"rate\"\n  },\n  NI_PT: {\n    title: \"NI Primary Threshold\",\n    description: \"The Primary Threshold is the lower bound for the main rate of NI.\",\n    default: 183,\n    value: 183,\n    max: 1000,\n    summary: \"Change the PT to £@/week\",\n    type: \"weekly\"\n  },\n  NI_UEL: {\n    title: \"NI Upper Earnings Limit\",\n    description: \"The Upper Earnings Limit is the upper bound for the main rate of NI.\",\n    default: 962,\n    value: 962,\n    max: 10000,\n    summary: \"Change the UEL to £@/week\",\n    type: \"weekly\"\n  },\n  child_BI: {\n    title: \"Child basic income\",\n    description: \"A basic income for children is given to every child aged under 18, regardless of household income.\",\n    default: 0,\n    value: 0,\n    max: 250,\n    summary: \"Give a basic income of £@/week to children\",\n    type: \"weekly\"\n  },\n  adult_BI: {\n    title: \"Adult basic income\",\n    description: \"Basic income for adults is given to individuals aged over 18 but under State Pension age.\",\n    default: 0,\n    value: 0,\n    max: 250,\n    summary: \"Give a basic income of £@/week to adults\",\n    type: \"weekly\"\n  },\n  senior_BI: {\n    title: \"Senior basic income\",\n    description: \"A basic income for senior citizens is given to those over State Pension age.\",\n    default: 0,\n    value: 0,\n    max: 250,\n    summary: \"Give a basic income of £@/week to seniors\",\n    type: \"weekly\"\n  },\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {selected: null, plan: DEFAULT_PLAN};\n  }\n\n  render() {\n    return (\n      <div style={{paddingLeft: 20, paddingRight: 20}}>\n      <PageHeader\n        title=\"openfisca-uk\"\n        subTitle=\"reform explorer\"\n        style={{height: 80}}\n      />\n      <Router>\n          <Switch>\n            <Route path=\"/simulation\">\n                <Row style={{paddingLeft: 250, paddingRight: 250, paddingBottom: 20}}>\n                  <Steps current={1}>\n                    <Step title=\"Policy\"></Step>\n                    <Step title=\"Results\" />\n                  </Steps>\n                </Row>\n                <Row>\n                  <Col md={2} style={{paddingLeft: 50}}>\n                    <PlanSummary plan={this.state.plan}/>\n                  </Col>\n                  <Col md={10}>\n                    <Results plan={this.state.plan}/>\n                  </Col>\n                </Row>\n            </Route>\n            <Route path=\"/\">\n                <Row style={{paddingLeft: 250, paddingRight: 250, paddingBottom: 20}}>\n                  <Steps current={0}>\n                    <Step title=\"Policy\" />\n                    <Step title=\"Results\" />\n                  </Steps>\n                </Row>\n                <Row>\n                  <Col>\n                    <div className=\"main-menu\" style={{height:\"88%\", overflowY: \"auto\", width: \"100%\"}}>\n                      <ControlTab onClick={name => {this.setState({selected: name.key})}}/>\n                    </div>\n                  </Col>\n                  <Col md={3}>\n                    <div className=\"main-menu\" style={{height:\"88%\", overflowY: \"auto\", width: \"100%\"}}>\n                      <Controls plan={this.state.plan} selected={this.state.selected} onChange={(name, val) => {let plan = this.state.plan; plan[name].value = val; this.setState({plan: plan})}}/>\n                    </div>\n                  </Col>\n                  <Col md={5}>\n                    <div className=\"main-menu\" style={{height:\"88%\", overflowY: \"auto\", width: \"100%\"}}>\n                      <PolicyCommentary selected={this.state.selected}/>\n                    </div>\n                  </Col>\n                  <Col md={2}>\n                    <div className=\"main-menu\" style={{height:\"88%\", overflowY: \"auto\", width: \"100%\"}}>\n                    <PlanSummary plan={this.state.plan} />\n                    <Empty description=\"\" image={null}>\n                      <SimulateButton />\n                    </Empty>\n                    </div>\n                  </Col>\n                </Row>\n            </Route>\n          </Switch>\n      </Router>\n        \n      </div>\n    )\n  }\n}\n\nfunction SimulateButton(props) {\n  return (\n    <div>\n      <Link to=\"/simulation\"><Button>Simulate</Button></Link>\n    </div>\n  )\n}\n\nfunction PolicyCommentary(props) {\n  return (\n    <>\n    <Divider>The UK Tax-Benefit System</Divider>\n    This calculator presents a toolkit for anyone to use, to estimate the effects of their ideas around how the UK taxes and distributes money on households, families and people in the United Kingdom. The first side panel displays a collection of policy switches; each of these describes a particular reform under a single parameter which may be combined with any other reform. Develop your policy plan by adding these reforms, and once you're ready to see the results, click the simulate button.\n    </>\n  )\n}\n\nclass Results extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {results: null, waiting: false}\n  }\n\n  componentDidMount() {\n    let submission = {}\n    for(let key in this.props.plan) {\n      if (this.props.plan[key].value !== this.props.plan[key].default) {\n        submission[key] = this.props.plan[key].value;\n      }\n    }\n    this.setState({waiting: true}, () => {\n      fetch(\"http://localhost:5000/reform\", {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(submission)\n      }).then(res => res.json()).then(json => {this.setState({results: json, waiting: false});})\n    })\n  }\n\n  render() {\n    if(this.state.results && this.state.results[\"status\"] === \"error\") {\n      return (\n        <Empty description=\"Error\">\n        </Empty>\n      )\n    }\n    return (\n      <>\n      <Divider>Results</Divider>\n      {this.state.results ? \n      <>\n        <Row>\n          <Col>\n            <Card>\n              <Statistic title=\"Net cost\" value={this.state.results.net_cost} />\n            </Card>\n          </Col>\n          <Col>\n            <Card>\n              <Statistic \n              title=\"Top 1% mean effect\" \n              value={Math.abs(this.state.results[\"1pct\"])}\n              precision={2}\n              valueStyle={{ color: this.state.results[\"1pct\"] >= 0 ? '#3f8600' : \"#cf1322\" }}\n              prefix={this.state.results[\"1pct\"] >= 0 ? <><ArrowUpOutlined />£</> : <><ArrowDownOutlined />£</>}\n              />\n            </Card>\n          </Col>\n          <Col>\n            <Card>\n              <Statistic \n              title=\"Top 10% mean effect\" \n              value={Math.abs(this.state.results[\"10pct\"])}\n              precision={2}\n              valueStyle={{ color: this.state.results[\"10pct\"] >= 0 ? '#3f8600' : \"#cf1322\" }}\n              prefix={this.state.results[\"10pct\"] >= 0 ? <><ArrowUpOutlined />£</> : <><ArrowDownOutlined />£</>}\n              />\n            </Card>\n          </Col>\n          <Col>\n            <Card>\n              <Statistic \n              title=\"Median effect\" \n              value={Math.abs(this.state.results[\"median\"])}\n              precision={2}\n              valueStyle={{ color: this.state.results[\"median\"] >= 0 ? '#3f8600' : \"#cf1322\" }}\n              prefix={this.state.results[\"median\"] >= 0 ? <><ArrowUpOutlined />£</> : <><ArrowDownOutlined />£</>}\n              />\n            </Card>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n        <Plot data={this.state.results.decile_plot.data} layout={this.state.results.decile_plot.layout} style={{width:\"100%\"}}/>\n          </Col>\n        </Row>\n        <Row>\n          <Col>\n        <Plot data={this.state.results.poverty_plot.data} layout={this.state.results.poverty_plot.layout} style={{width:\"100%\"}}/>\n          </Col>\n          <Col>\n        <Plot data={this.state.results.age.data} layout={this.state.results.age.layout} style={{width:\"100%\"}}/>\n          </Col>\n        </Row>\n      </>:\n      <Empty description=\"Simulating your plan on the UK population\">\n        {this.state.waiting ? <><br /><br /><Spin indicator={antIcon}/></> : null}\n      </Empty>\n      }\n      </>\n    )\n  }\n}\n\n\n\nfunction PlanSummary(props) {\n  return (\n    <>\n    <Divider>Your plan</Divider>\n    <Steps progressDot direction=\"vertical\">\n      {\n        Object.keys(props.plan).map((key, i) => (\n          props.plan[key].value !== props.plan[key].default ?\n          <Step key={key} status=\"finish\" title={props.plan[key].title} description={props.plan[key].summary.replace(\"@\", props.plan[key].value)} /> :\n          null\n        ))\n      }\n    </Steps>\n    </>\n  )\n}\n\n\nclass ControlTab extends React.Component {\n  render() {\n    return (\n      <Menu\n        onClick={this.props.onClick}\n        mode=\"inline\"\n        openKeys={[\"tax\", \"income_tax\", \"national_insurance\", \"benefit\", \"means\"]}\n      >\n        <SubMenu key=\"tax\" title=\"Tax\">\n          <SubMenu key=\"income_tax\" title=\"Income Tax\">\n            <Menu.Item key=\"main_rates\">Labour income</Menu.Item>\n            <Menu.Item key=\"sav_div\">Savings and dividends</Menu.Item>\n            <Menu.Item key=\"allowances\">Allowances</Menu.Item>\n            <Menu.Item key=\"it_alt\">Structural</Menu.Item>\n          </SubMenu>\n          <SubMenu key=\"national_insurance\" title=\"National Insurance\">\n            <Menu.Item key=\"employee_side\">Employees</Menu.Item>\n            <Menu.Item key=\"employer_side\">Employers</Menu.Item>\n            <Menu.Item key=\"ni_alt\">Structural</Menu.Item>\n          </SubMenu>\n        </SubMenu>\n        <SubMenu key=\"benefit\" title=\"Benefit\">\n          <SubMenu key=\"means\" title=\"Means-tested benefits\">\n            <Menu.Item key=\"universal_credit\">Universal Credit</Menu.Item>\n            <Menu.Item key=\"jsa\">JSA</Menu.Item>\n            <Menu.Item key=\"cb\">Child Benefit</Menu.Item>\n            <Menu.Item key=\"wtc\">Working Tax Credit</Menu.Item>\n            <Menu.Item key=\"ctc\">Child Tax Credit</Menu.Item>\n            <Menu.Item key=\"hb\">Housing Benefit</Menu.Item>\n            <Menu.Item key=\"is\">Income Support</Menu.Item>\n          </SubMenu>\n        </SubMenu>\n        <Menu.Item key=\"basic_income\">Basic income</Menu.Item>\n      </Menu>\n    )\n  }\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}